# Overview of code in this folder

This folder contains code I used to work with OSOM output using Oscar, the Brown University supercomputer. The primary product of this code is graphs of spatial averages of chlorophyll against time. To produce these graphs, the first thing I had to do was go into Professor Ullman's OSOM runs, extract the variables I wanted (Chlorophyll1 and Chlorophyll2) for the surface ocean layer and put them in a folder in my own directory on Oscar. Then I used [NetCDF Operators (NCO)](http://nco.sourceforge.net/nco.html) to combine those files in my own directory into a single file that could be analyzed with a python notebook. The batch scripts for going into Professor Ullman's directory and copying data into my own folder are saved in the [producing_netcdfs](https://github.com/austinbennysmith/OSOM-ERDDAP/tree/master/Oscar_files/producing_netcdfs) folder. These programs use the [ncks](http://nco.sourceforge.net/nco.html#ncks-netCDF-Kitchen-Sink) function, and specify the s_rho variable as -1 to get only the surface, and eta_rho as 0 to 600 to cut off Narragansett Bay (thus enabling comparison to satellite data). I have left most files in the same places they used to be, so re-running these programs should work with the directory structure. Future changes may make slight adjustments necessary. The code for combining all the one-day chlorophyll files in my folders into single files no longer exists, but I believe it was a simple one-line script using the [ncrcat](http://nco.sourceforge.net/nco.html#Concatenation) function.

Once the data was moved around into the correct locations, I wrote Python and batch scripts to take averages across space and graph those averages across time. I did this for the 2006, 2017, and 2018 OSOM runs, and the scripts for those years are saved in the folders [analyzing_2006](https://github.com/austinbennysmith/OSOM-ERDDAP/tree/master/Oscar_files/analyzing_2006), [analyzing_2017](https://github.com/austinbennysmith/OSOM-ERDDAP/tree/master/Oscar_files/analyzing_2017), and [analyzing_2018](https://github.com/austinbennysmith/OSOM-ERDDAP/tree/master/Oscar_files/analyzing_2018), respectively. Each of these folders has 6 files. The files called surfchl_YYYY.py take the average of Chlorophyll 1 across space for each point in time in the run and put it in a list that is then printed. The surfchl2_YYYY.py files do this for Chlorophyll 2. The surfchl_YYYY.sh and surfchl2_YYYY.sh files are batch scripts that execute surfchl_YYYY.py and surfchl2_YYYY.sh, respectively. Finally, the Chlorophyll1_YYYY_surf.out and Chlorophyll2_YYYY_surf.out files are output from the other scripts. At the end of these output files are lists of times and chlorophyll averages that can be used to produce graph. The notebook graphing_allyears.py makes graphs with the output files, and graphing_allyears.sh is a batch script the executes graphing_allyears.py.
